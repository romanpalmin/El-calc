var PSEC={};PSEC.Calc=function(t,a,n){function e(){i(),l(),u(),r()}function r(){g.val(12).trigger("input"),p.val(50).trigger("input"),d.val(25e3).trigger("input")}function l(){b.forEach(function(t){t.bind("change keyup input click",function(t){t.target.value.match(/[^0-9]/g)&&(t.target.value=this.value.replace(/[^0-9]/g,""))})}),g.on("input",function(a){a.currentTarget.value>t.period.max&&(a.currentTarget.value=t.period.max),a.currentTarget.value>=t.period.min&&a.currentTarget.value<=t.period.max?(T.slider("value",a.currentTarget.value),c()):console.log("Период некорректен.")}),d.on("input",function(a){a.currentTarget.value>t.amount.max&&(a.currentTarget.value=t.amount.max),a.currentTarget.value>=t.amount.min&&a.currentTarget.value<=t.amount.max?(h.slider("value",a.currentTarget.value),c()):console.log("Минимальная сумма вклада: 3000 Р")}),p.on("input",function(a){a.currentTarget.value>t.reinvest.max&&(a.currentTarget.value=t.reinvest.max),a.currentTarget.value>=t.reinvest.min&&a.currentTarget.value<=t.reinvest.max&&(f.slider("value",a.currentTarget.value),c())})}function u(){h.slider({min:3e3,max:5e5,orientation:"horizontal",range:"min",animate:!0,slide:function(t,a){d.val(a.value).trigger("input")}}),f.slider({min:0,max:100,orientation:"horizontal",range:"min",animate:!0,slide:function(t,a){p.val(a.value).trigger("input")}}),T.slider({min:1,max:36,orientation:"horizontal",range:"min",animate:!0,slide:function(t,a){g.val(a.value).trigger("input")}})}function c(){var t,n=d.val(),e=p.val(),r=g.val();t=a.Calculate(n,e,r,a.periodType.MONTH),C.html(o(t).htmlTable),S.html(o(t).htmlSummary)}function i(){_.on("click",function(){d.val(1*d.val()-1).trigger("input")}),x.on("click",function(){d.val(1*d.val()+1).trigger("input")}),F.on("click",function(){g.val(1*g.val()-1).trigger("input")}),k.on("click",function(){g.val(1*g.val()+1).trigger("input")}),R.on("click",function(){p.val(1*p.val()-1).trigger("input")}),y.on("click",function(){p.val(1*p.val()+1).trigger("input")})}function o(t){console.log(t);var a,e,r,l=t.summaryAmounts,u={},c=[],i=[],o=['<table class="b-result-table">',"<thead> ","<th>Месяц</th>","<th>Взнос</th>","<th>Общий взнос</th>","<th>Доход</th>","<th>Реинвест</th>","<th> Вывод </th>","<th> Общий вывод</th>","</thead>","<tbody>"];return l.forEach(function(t){i=i.concat(['<tr class="b-result-table-row">',"<td>",n.Round(t.periodIterator+1),"</td>","<td>",n.FormatRound(t.amount),"</td>","<td>",n.FormatRound(t.totalAmount),"</td>","<td>",n.FormatRound(t.feeInPeriod),"</td>","<td>",n.FormatRound(t.reinvest),"</td>",'<td class="b-strong">',n.FormatRound(t.cash),"</td>","<td>",n.FormatRound(t.totalCash),"</td>","</tr>"])}),r=["</tbody></table>"],a=o.concat(i,r).join(""),c=['<h2 class="calc_choice_vklad_summ_title">','Сумма взносов на конец периода:  <span class="b-elcalc-summary_amount">',n.FormatRound(t.currentSumAmounts)," Р","</span><br>",'Сумма выплат на конец периода:  <span class="b-elcalc-summary_amount">',n.FormatRound(t.summaryCash)," Р","</span>"],c=t.restInBalance>0?c.concat(['<br>Остаток на балансе на конец периода: <span class="b-elcalc-summary_amount">',n.FormatRound(t.restInBalance)," Р","</span>"]):c.concat(["</h2>"]),e=c.join(""),u={htmlTable:a,htmlSummary:e}}var m=$(".b-elcalc-amount"),s=$(".b-elcalc-months"),v=$(".b-elcalc-percent"),d=$("#amount"),g=$("#period"),p=$("#percent"),b=[m,s,v,d,p,g],h=$(".b-elcalc-slider_amount"),f=$(".b-elcalc-slider_percent"),T=$(".b-elcalc-slider_period"),_=$(".b-elcalc-minus-btn_amount"),x=$(".b-elcalc-plus-btn_amount"),y=$(".b-elcalc-plus-btn_percent"),R=$(".b-elcalc-minus-btn_percent"),k=$(".b-elcalc-plus-btn_period"),F=$(".b-elcalc-minus-btn_period"),C=$(".b-result"),S=$(".b-result-summary");e()};